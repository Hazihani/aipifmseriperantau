<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ayamas Feedmill - Pangsapuri Seri Perantau</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
	<center>
		<h1>AIPI Feedmill</h1>
		<h2>Pangsapuri Seri Perantau Residents</h2>
	</center>
	<div class="container">
		<!-- Cleaning Schedule -->
		<script>
			arrayToTable();
		</script>
	</div>
	<div class="container">
		<!-- Laundry Booking -->
		<div id="demo-booking-single"></div>

	</div>
	<script src="https://code.jquery.com/jquery-3.7.1.js"
		integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
		integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.2/papaparse.js"></script>
	<script type="text/javascript">
		$.get('/file-path/seriperantaupattern3p.csv', function (data) {
			var build = '<table border="1" cellpadding="2" cellspacing="0" style="border-collapse: collapse" width="100%">\n';
			var head = data.split("\n");
			for (var i = 0; i < 1; i++) {
				build += "<tr><th>" + head[i] + "</th></tr>";
				for (var i = 1; i < head.length; i++) {
					build += "<tr><td>" + head[i].split("\n") + "</td></tr>";
				}
			}
			build += "</table>";
			$('#wrap').append(build);
		});
	</script>
	<script>
		const min = '2024-03-22T00:00';
		const max = '2024-09-22T00:00';

		$('#demo-booking-single').mobiscroll().datepicker({
			display: 'inline',
			controls: ['calendar'],
			min: min,
			max: max,
			onPageLoading: function (event, inst) {
				getPrices(event.firstDay, function callback(bookings) {
					inst.setOptions({
						labels: bookings.labels,
						invalid: bookings.invalid
					});
				});
			}
		});

		function getPrices(d, callback) {
			var invalid = [],
				labels = [];

			mobiscroll.getJson('//trial.mobiscroll.com/getprices/?year=' + d.getFullYear() + '&month=' + d.getMonth(), function (bookings) {
				for (var i = 0; i < bookings.length; ++i) {
					var booking = bookings[i],
						d = new Date(booking.d);

					if (booking.price > 0) {
						labels.push({
							start: d,
							title: '$' + booking.price,
							textColor: '#e1528f'
						});
					} else {
						invalid.push(d);
					}
				}
				callback({ labels: labels, invalid: invalid });
			}, 'jsonp');
		}
	</script>
</body>

</html>